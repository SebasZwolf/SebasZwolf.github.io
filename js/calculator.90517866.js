(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calculator"],{1765:function(t,e,a){"use strict";a("1f49")},"1f49":function(t,e,a){},2532:function(t,e,a){"use strict";var o=a("23e7"),n=a("5a34"),r=a("1d80"),i=a("ab13");o({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(r(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"2af1":function(t,e,a){var o=a("23e7"),n=a("f748");o({target:"Math",stat:!0},{sign:n})},"2bb1":function(t,e,a){},"44e7":function(t,e,a){var o=a("861d"),n=a("c6b6"),r=a("b622"),i=r("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==n(t))}},"4de4":function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").filter,r=a("1dde"),i=r("filter");o({target:"Array",proto:!0,forced:!i},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var o=a("1d80"),n=a("5899"),r="["+n+"]",i=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(t){return function(e){var a=String(o(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(t,e,a){var o=a("44e7");t.exports=function(t){if(o(t))throw TypeError("The method doesn't accept regular expressions");return t}},7156:function(t,e,a){var o=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var r,i;return n&&"function"==typeof(r=e.constructor)&&r!==a&&o(i=r.prototype)&&i!==a.prototype&&n(t,i),t}},"8e22":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calculator"},[a("Calculator",{attrs:{saving:t.$store.state.current_user.logged},on:{save:function(e){return t.saveBonoDialog(e)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.saving,expression:"saving"}],staticStyle:{"background-color":"#0004",position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.saving,expression:"saving"}],staticClass:"popup"},[t.saving?a("AddBono",{attrs:{meta_bono:t.bono},on:{save:t.saveBono,cancel:function(e){t.saving=!1}}}):t._e()],1)],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bono-view"},[a("div",{staticClass:"report-row",staticStyle:{display:"flex"}},[a("a",{staticClass:"close-btn",on:{click:function(e){return t.$emit("cancel")}}},[t._v("go back")]),a("span",{})]),a("h3",[t._v("Añadir Bono a lista")]),a("form",{attrs:{action:"#"},on:{submit:[function(t){t.preventDefault()},t.addbono]}},[a("div",[t._m(0),a("div",[a("div",{staticClass:"report-row",staticStyle:{display:"flex"}},[a("span",{},[t._v("tipo de bono:")]),a("span",{},[t._v(t._s(t.tipo_bono(t.meta_bono)))])]),a("div",{staticClass:"report-row"},[a("span",[t._v("duración del periodo:")]),a("span",[t._v(t._s(t.meta_bono.periodo)+" años")])]),a("div",{staticClass:"report-row"},[a("span",[t._v("pago por cupón:")]),a("span",[t._v(t._s(t.meta_bono.cupon))])]),a("div",{staticClass:"report-row"},[a("span",[t._v("frecuencia entre pagos:")]),a("span",[t._v(t._s(t.meta_bono.frecuencia)+" días")])]),a("div",{staticClass:"report-row"},[a("span",[t._v("numero de pagos recibidos:")]),a("span",[t._v(t._s(t.meta_bono.cxp)+" cupones")])])]),a("div",{staticStyle:{border:"solid 1px",padding:".5rem 1rem"}},[a("InputIndicative",{attrs:{namep:"vnom",title:"valor nominal",descr:"Valor nominal del bono",value:t.meta_bono.valor_nominal,disabled:!0}}),a("InputIndicative",{attrs:{namep:"pbac",title:"precio del cupón",descr:"Valor comercial del bono",value:t.meta_bono.precio_actual,disabled:!0}}),a("InputIndicative",{attrs:{namep:"pbac",title:"retorno del cupón",descr:"Suma de las rentas devueltas del bono",value:t.meta_bono.valor_actual,disabled:!0}}),a("InputIndicative",{attrs:{namep:"avna",title:"VNA",descr:"Valor nominal del bono",value:t.meta_bono.vna,disabled:!0}})],1),a("button",{attrs:{type:"submit"}},[t._v("Guardar")])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 10%"}},[a("div",{staticClass:"more-info"},[a("span",[t._v("nombre")]),a("input",{attrs:{name:"bname",type:"text",required:""}})]),a("div",{staticClass:"more-info"},[a("span",[t._v("RUC")]),a("input",{attrs:{name:"bruc",type:"text",value:"",pattern:"^([0-9]{11})?$"}})])])}],s=a("b85c"),c=(a("2af1"),a("d3b7"),a("ddb0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-indicative"},[a("label",{attrs:{for:this._uid}},[t._v(t._s(t.title))]),a("div",{staticClass:"input-info"},[a("div",[a("p",{domProps:{innerHTML:t._s(t.descr)}})])]),t._m(0),void 0!==t.error?a("div",{staticClass:"error-message"},[a("span",[t._v(t._s(t.error))])]):t._e()])}),l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"input-numb",attrs:{readonly:t.readonly,disabled:t.disabled,name:t.namep,type:"number",step:"any",id:this._uid},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})}],u=(a("a9e3"),a("159b"),{name:"InputIndicative",data:function(){return{id:null}},props:{title:String,descr:String,namep:String,error:String,mods:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:{type:Number,default:0}},mounted:function(){var t=document.getElementById(this._uid);this.mods.forEach((function(e){t.addEventListener(e.trigger,e.action)}))}}),d=u,p=(a("1765"),a("2877")),v=Object(p["a"])(d,c,l,!1,null,"4db4a8a9",null),m=v.exports,f={data:function(){return{bono:{periodo:5,coupon:10,cxp:10,frecuencia:180}}},props:{meta_bono:Object},computed:{},watch:{},components:{InputIndicative:m},methods:{tipo_bono:function(t){switch(console.log(t),Math.sign(t.valor_nominal-t.precio_actual)){case 0:return"bono emitido a la par";case 1:return"bono emitido a descuento";case-1:return"bono con prima"}},addbono:function(t){var e,a=new FormData(t.target),o={},n=Object(s["a"])(a.entries());try{for(n.s();!(e=n.n()).done;){var r=e.value;o[r[0]]=r[1]}}catch(i){n.e(i)}finally{n.f()}console.log(o),this.meta_bono.nombre=o.bname,this.meta_bono.ruc=""+o.bruc,this.$emit("save",this.meta_bono)}},mounted:function(){}},b=f,_=(a("dddb"),Object(p["a"])(b,r,i,!1,null,"44655169",null)),h=_.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calculator"},[a("form",{attrs:{action:"#"},on:{submit:[function(t){t.preventDefault()},t.calculate]}},[a("div",[a("InputIndicative",{attrs:{namep:"vnom",title:"valor nominal",error:t.ope_error.vnom,descr:"Valor nominal del bono.<br>Valores mayores a 0."}}),a("InputIndicative",{attrs:{error:t.ope_error.tcup,namep:"tcup",title:"tasa del cupón(%)",descr:"Tasa efectiva anual aplicada al cupón.<br>Valores (de 1 hasta 100%)."}}),a("InputIndicative",{attrs:{error:t.ope_error.frec,namep:"frec",title:"frecuencia de capitalización(d)",descr:"Número de días en un perido regular de pago del cupón.<br>Valores múltiplos de 30 (de 30 hasta 360 días).",mods:[{trigger:"focusout",action:function(t){var e=parseFloat(t.target.value);e=30*Math.round(e/30),e=Math.max(e,30),t.target.value=e}}]}}),a("InputIndicative",{attrs:{error:t.ope_error.peri,namep:"peri",title:"periodo(a)",descr:"Número de años de pago.<br>Valores enteros (de 1 - 20 años)."}}),a("InputIndicative",{attrs:{error:t.ope_error.tmar,namep:"tmar",title:"tasa del mercado(%)",descr:"Tasa efectiva anual de mercado.<br>Valores (de 1 hasta 100%)."}}),a("InputIndicative",{attrs:{error:t.ope_error.prim,namep:"prim",title:"prima del cupón(%)",descr:"Prima o porcentaje del valor nominal.<br>Valores (de 0 hasta 50%)."}}),a("button",{attrs:{type:"submit"}},[t._v("Calcular")])],1)]),a("form",{on:{submit:[function(t){t.preventDefault()},t.analize]}},[t.bono.evo>0?a("div",[a("InputIndicative",{key:t.meta_bono.valor_actual,attrs:{namep:"vnac",title:"valor del cupón",descr:"Valor nominal del bono",value:t.meta_bono.valor_actual,readonly:!0}}),a("InputIndicative",{attrs:{error:t.ope_error.pbac,namep:"pbac",title:"precio del cupón",descr:"Valor comercial del bono"}}),a("div",{staticStyle:{display:"block"}},[a("label",{staticStyle:{"font-size":"90%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adv,expression:"adv"}],attrs:{type:"checkbox",name:"adv"},domProps:{checked:Array.isArray(t.adv)?t._i(t.adv,null)>-1:t.adv},on:{change:function(e){var a=t.adv,o=e.target,n=!!o.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);o.checked?i<0&&(t.adv=a.concat([r])):i>-1&&(t.adv=a.slice(0,i).concat(a.slice(i+1)))}else t.adv=n}}}),t._v("datos adicionales")])]),t.adv?a("InputIndicative",{attrs:{error:t.ope_error.flot,namep:"flot",title:"flotación(%)",descr:"Porcentaje por gastos de flotación del Bono.<br>Valores (de 0 hasta 10%)"}}):t._e(),t.adv?a("InputIndicative",{attrs:{error:t.ope_error.cava,namep:"cava",title:"cavali(%)",descr:"Porcentaje por cavalí del Bono<br>Valores (de 0 hasta 10%)"}}):t._e(),a("InputIndicative",{key:t.meta_bono.vna,attrs:{namep:"avna",title:"VNA",descr:"Valor nominal del bono",value:t.meta_bono.vna,disabled:!0}}),a("InputIndicative",{key:t.meta_bono.vna,attrs:{namep:"bc",title:"B/C",descr:"Indicador porcentual Beneficio/Costo.",value:(t.meta_bono.valor_actual/t.meta_bono.precio_actual).toFixed(2),disabled:!0}}),a("button",{attrs:{type:"submit"}},[t._v("Analizar")]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.saving&&t.bono.evo>1,expression:"saving && bono.evo > 1"}],attrs:{type:"button"},on:{click:t.save}},[t._v("Guardar")])],1):t._e()]),a("form",{on:{submit:[function(t){t.preventDefault()},t.findTIR]}},[t.bono.evo>1?a("div",{staticClass:"valueButton"},[a("button",{attrs:{type:"submit"}},[t._v("hallar la TIR")]),a("span",[t._v(t._s(t.meta_bono.TIR))])]):t._e(),t._m(0)])])},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"valueButtonTag",staticStyle:{height:"0",overflow:"show",position:"relative"}},[a("p",[t._v("Calcular el TIR es una operación pesada que puede tardar unos minutos, tiene a su dispocición otros 2 indicadores de rentabilidad (VNA y B/C), esta seguro de que desea calcular el TIR? ")])])}],y=(a("4de4"),a("caad"),a("2532"),a("b64b"),a("9dc0")),x={data:function(){return{tries:0,adv:!0,bono:{valor_actual:0,precio_actual:0,pagos:[],vna:0,nombre:"",evo:0},meta_bono:{},ope_error:{},validation:{allow_zero:["prim","flot","cava"],max_limit:{tcup:50,frec:360,peri:20,tmar:50,prim:50,flot:10,cava:10}}}},props:{saving:Boolean},components:{InputIndicative:m},methods:{save:function(){this.$emit("save",this.meta_bono)},param_validate:function(t,e){var a,o=this,n=[],r=[],i=[],c=Object(s["a"])(e.entries());try{for(c.s();!(a=c.n()).done;){var l=a.value,u=l[1],d=parseFloat(u);""===u?n.push(l[0]):d<0?i.push(l[0]):0===d&&r.push(l[0]),t[l[0]]=d}}catch(v){c.e(v)}finally{c.f()}if(this.ope_error={},r=r.filter((function(t){return!o.validation.allow_zero.includes(t)})),n.forEach((function(t){return o.ope_error[t]="el campo no puede ser un valor nulo"})),r.forEach((function(t){return o.ope_error[t]="el campo no puede tener un valor 0"})),i.forEach((function(t){return o.ope_error[t]="el campo no puede tener un valor negativo"})),n.length+r.length+i.length>0)return!0;for(var p in t)this.validation.max_limit.hasOwnProperty(p)&&t[p]>this.validation.max_limit[p]&&(this.ope_error[p]="el valor excede el maximo permitido que es ".concat(this.validation.max_limit[p]));return Object.keys(this.ope_error).length>0},calculate:function(t){var e=new FormData(t.target),a={};if(!this.param_validate(a,e)){console.log(a);var o=y["a"].BonoCalculadora(a.vnom,a.tcup,a.frec,a.peri,a.tmar,a.prim);this.meta_bono={},this.bono.valor_actual=o.VNA,this.bono.pagos=o.pagos,this.meta_bono.valor_nominal=a.vnom,this.meta_bono.valor_actual=o.VNA,this.meta_bono.frecuencia=a.frec,this.meta_bono.periodo=a.peri,this.meta_bono.cxp=360*a.peri/a.frec,this.meta_bono.prima=a.prim/100,this.meta_bono.cupon=o.cupon,this.bono.evo=1}},analize:function(t){var e=new FormData(t.target),a={};if(!this.param_validate(a,e)){console.log(a);var o=y["a"].BonoAnalisis({VNA:this.bono.valor_actual,pagos:this.bono.pagos},a.pbac,a.flot,a.cava);this.meta_bono.TIR=null,this.bono.vna=o.VNA,this.meta_bono.precio_actual=o.precio_de_venta,this.meta_bono.vna=o.VNA,this.bono.evo=2}},findTIR:function(t){this.bono.evo=3,this.meta_bono.TIR=y["a"].BonoTIR(this.meta_bono)}},mounted:function(){}},w=x,N=(a("cb87"),Object(p["a"])(w,g,I,!1,null,"0800cdd2",null)),A=N.exports,C={data:function(){return{saving:!1,bono:{}}},components:{Calculator:A,AddBono:h},methods:{saveBonoDialog:function(t){this.bono=t,this.saving=!0},saveBono:function(t){this.$store.dispatch("pre_load"),this.$store.state.aux_bonos.push(t),this.$store.dispatch("post_bonos"),this.saving=!1,this.bono={}}}},V=C,E=Object(p["a"])(V,o,n,!1,null,"c26b2d48",null);e["default"]=E.exports},"9dc0":function(t,e,a){"use strict";a("2af1");e["a"]={BonoCalculadora:function(t,e,a,o,n,r){e/=100,n/=100,r/=100;for(var i=o*(360/a),s=Math.pow(1+e,a/360)-1,c=Math.pow(1+n,a/360)-1,l=Math.round(t*s*100)/100,u=0,d=[],p=1;p<=i;p++){var v=(p==i?l+t*(1+r):l)/Math.pow(1+c,p);u+=v,d.push(v)}return{VNA:Math.round(100*u)/100,pagos:d,cupon:l}},BonoAnalisis:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a/=100,o/=100;var n=e*(1+a+o),r=t.pagos.reduce((function(t,e){return t+e}))-n;return{precio_de_venta:Math.round(100*n)/100,valor_de_venta:t.VNA,VNA:Math.round(100*r)/100}},BonoTIR:function(t){var e;console.log("calculando"),console.log(t);var a=0,o=t.precio_actual,n=.01,r=.5,i=1e-4,s=[];do{a++,e=0,s.length=0;for(var c=0;c<t.cxp;c++)s.push(c!=t.cxp-1?t.cupon:t.cupon+t.valor_nominal*(1+t.prima)),e+=(c!=t.cxp-1?t.cupon:t.cupon+t.valor_nominal*(1+t.prima))/Math.pow(1+n,c+1);var l=n;Math.sign(e-o)>0?i=n:r=n,n=i+.5*(r-i),console.log({oldguess:l,guess:n,result:e,diff:e-o,_va:o})}while(Math.abs(e-o)>5e-4&&a<50);return console.log(s),n},BonoPagos:function(t){var e=new Date(t.date),a=t.frecuencia,o=(t.perido,[]),n=0;switch(console.log(t),a<360?(n=2,a/=30):(n=3,a/=360),n){case 2:for(var r=0;r<t.cxp;r++)o.push({date:new Date(e.getFullYear(),e.getMonth()+a*r,e.getDay()).toDateString(),value:r!=t.cxp-1?t.cupon:t.cupon+t.valor_nominal*(1+t.prima)});break;case 3:for(var i=0;i<t.cxp;i++)o.push({date:new Date(e.getFullYear()+a*i,e.getMonth(),e.getDay()).toDateString(),value:i!=t.cxp-1?t.cupon:t.cupon+t.valor_nominal*(1+t.prima)});break}return o}}},a9e3:function(t,e,a){"use strict";var o=a("83ab"),n=a("da84"),r=a("94ca"),i=a("6eeb"),s=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),v=a("241c").f,m=a("06cf").f,f=a("9bf2").f,b=a("58a8").trim,_="Number",h=n[_],g=h.prototype,I=c(p(g))==_,y=function(t){var e,a,o,n,r,i,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=b(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:o=2,n=49;break;case 79:case 111:o=8,n=55;break;default:return+l}for(r=l.slice(2),i=r.length,s=0;s<i;s++)if(c=r.charCodeAt(s),c<48||c>n)return NaN;return parseInt(r,o)}return+l};if(r(_,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof w&&(I?d((function(){g.valueOf.call(a)})):c(a)!=_)?l(new h(y(e)),a,w):y(e)},N=o?v(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;N.length>A;A++)s(h,x=N[A])&&!s(w,x)&&f(w,x,m(h,x));w.prototype=g,g.constructor=w,i(n,_,w)}},ab13:function(t,e,a){var o=a("b622"),n=o("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,"/./"[t](e)}catch(o){}}return!1}},b64b:function(t,e,a){var o=a("23e7"),n=a("7b0b"),r=a("df75"),i=a("d039"),s=i((function(){r(1)}));o({target:"Object",stat:!0,forced:s},{keys:function(t){return r(n(t))}})},caad:function(t,e,a){"use strict";var o=a("23e7"),n=a("4d64").includes,r=a("44d2");o({target:"Array",proto:!0},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")},cb87:function(t,e,a){"use strict";a("2bb1")},dddb:function(t,e,a){"use strict";a("fe14")},f748:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},fe14:function(t,e,a){}}]);
//# sourceMappingURL=calculator.90517866.js.map